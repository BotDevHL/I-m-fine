<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Holy Scripture Sanctuary — Night Mode + Bible Reader Edition</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b1226" />

<style>
/* (Styles unchanged for brevity — same as your current working version) */
body {
  margin: 0;
  background: #f5ecd4;
  font-family: Georgia, serif;
  color: #4a3205;
  overflow-x: hidden;
  text-align: center;
  padding-bottom: 130px;
  transition: background 0.6s, color 0.6s;
}

/* NIGHT MODE */
body.night {
  background: #0b1226;
  color: #f5eac1;
}

/* NIGHT TOGGLE */
#nightToggle {
  position: fixed;
  top: 15px;
  right: 15px;
  padding: 10px 15px;
  border-radius: 10px;
  z-index: 9999;
}

/* BIBLE READER */
#bibleReaderOverlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  display:none;
  flex-direction:column;
  background:rgba(5,10,25,0.85);
  color:#f5eac1;
  padding:20px;
  z-index:9998;
}

#bibleReaderBox {
  flex:1;
  overflow-y:scroll;
  font-size:20px;
  line-height:1.6;
  padding:25px;
  border:2px solid #d1af56;
  border-radius:12px;
}

#bibleReaderControls {
  display:flex;
  gap:10px;
  justify-content:center;
  margin-top:15px;
}

/* MUSIC BAR */
#musicBar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: linear-gradient(to bottom, #fff0c2, #e4c173);
  border-top: 2px solid #c79f44;
  padding: 10px;
  text-align: center;
}

/* BUTTONS */
.musicBtn, .readerBtn {
  padding:12px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<button id="nightToggle" onclick="toggleNightMode()">Night Mode</button>

<!-- FULLSCREEN BIBLE READER -->
<div id="bibleReaderOverlay">
  <div id="bibleReaderBox"></div>
  <div id="bibleReaderControls">
    <button class="readerBtn" onclick="closeBibleReader()">Close</button>
    <button class="readerBtn" onclick="toggleScroll()">Start Auto‑Scroll</button>
    <button class="readerBtn" onclick="scrollFaster()">Faster</button>
    <button class="readerBtn" onclick="scrollSlower()">Slower</button>
  </div>
</div>

<!-- MUSIC BAR -->
<div id="musicBar">
  <div id="currentSong">No song playing</div>
  <button onclick="togglePlayPause()">Play/Pause</button>
  <button onclick="stopMusic()">Stop</button><br>
  <input type="range" id="musicProgress" min="0" max="100" value="0">
  <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
</div>

<audio id="musicPlayer"></audio>

<h1>Holy Scripture Sanctuary</h1>

<!-- BIBLE READER -->
<div class="section">
  <h2>Read the Holy Bible (KJV)</h2>

  <select id="bibleBook"></select>
  <br><br>
  <select id="bibleChapter"></select>

  <br><br>
  <button class="musicBtn" onclick="openBibleReader()">Open Bible Reader</button>
</div>

<!-- Worship Playlist -->
<div class="section">
  <h2>Worship Music Playlist</h2>
  <button class="musicBtn" onclick="playSong('gospel')">Use This Gospel</button>
  <button class="musicBtn" onclick="playSong('holy')">Holy Forever</button>
</div>

<!-- (All your previous sections remain unchanged…) -->

<script>
/* ===========================
   POPULATE BOOK SELECTOR
   =========================== */
const bibleBooks = [
  "Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges",
  "Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles",
  "Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes",
  "Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel",
  "Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk",
  "Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John",
  "Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians",
  "Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy",
  "2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter",
  "1 John","2 John","3 John","Jude","Revelation"
];

const bookSelect = document.getElementById("bibleBook");
bibleBooks.forEach(b => {
  const opt = document.createElement("option");
  opt.value = b;
  opt.innerText = b;
  bookSelect.appendChild(opt);
});

/* ===========================
   LOAD CHAPTERS FROM JSON
   =========================== */
const chapterSelect = document.getElementById("bibleChapter");

bookSelect.onchange = async () => {
  chapterSelect.innerHTML = "";
  const book = bookSelect.value.replace(/\s+/g, "");

  const res = await fetch(`bible/${book}.json`);
  const data = await res.json();

  for (const chapter in data) {
    const opt = document.createElement("option");
    opt.value = chapter;
    opt.innerText = "Chapter " + chapter;
    chapterSelect.appendChild(opt);
  }
};

/* AUTO-LOAD CHAPTERS FOR FIRST BOOK */
bookSelect.dispatchEvent(new Event("change"));

/* ===========================
   OPEN READER
   =========================== */
let scrollSpeed = 1;
let scrollInterval = null;

async function openBibleReader() {
  const book = bookSelect.value.replace(/\s+/g, "");
  const chapter = chapterSelect.value;

  const res = await fetch(`bible/${book}.json`);
  const data = await res.json();

  const text = data[chapter]
    .replace(/\n/g, "<br><br>");

  document.getElementById("bibleReaderBox").innerHTML = 
    `<h2>${bookSelect.value} ${chapter}</h2><br>${text}`;

  document.getElementById("bibleReaderOverlay").style.display = "flex";
}

function closeBibleReader() {
  document.getElementById("bibleReaderOverlay").style.display = "none";
  stopAutoScroll();
}

function toggleScroll() {
  if (scrollInterval) stopAutoScroll();
  else startAutoScroll();
}
function startAutoScroll() {
  scrollInterval = setInterval(() => {
    document.getElementById("bibleReaderBox").scrollTop += scrollSpeed;
  }, 60);
}
function stopAutoScroll() {
  clearInterval(scrollInterval);
  scrollInterval = null;
}
function scrollFaster() { scrollSpeed += 0.5; }
function scrollSlower() { scrollSpeed = Math.max(0.5, scrollSpeed - 0.5); }

/* ===========================
   NIGHT MODE
   =========================== */
function toggleNightMode() {
  document.body.classList.toggle("night");
}

/* ===========================
   MUSIC PLAYER
   =========================== */
const musicPlayer = document.getElementById("musicPlayer");
const songs = {
  gospel: { title: "Use This Gospel", url:"https://files.catbox.moe/frtvpr.mp3" },
  holy: { title: "Holy Forever", url:"https://files.catbox.moe/q0n9yh.mp3" }
};

function playSong(s) {
  musicPlayer.src = songs[s].url;
  document.getElementById("currentSong").innerText = songs[s].title;
  musicPlayer.play();
}
function togglePlayPause() {
  musicPlayer.paused ? musicPlayer.play() : musicPlayer.pause();
}
function stopMusic() {
  musicPlayer.pause();
  musicPlayer.currentTime = 0;
}

/* ===========================
   PWA REGISTRATION
   =========================== */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.reg
